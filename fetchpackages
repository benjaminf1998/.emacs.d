(if (>= emacs-major-version 24)
    (progn
       (setq package-archives '(("ELPA" . "http://tromey.com/elpa/")
      ("gnu" . "http://elpa.gnu.org/packages/")
      ("marmalade" . "http://marmalade-repo.org/packages/")))
       (package-refresh-contents)
       (when (not (require 'flymake nil t))
         (package-install 'flymake))
       (when (not (require 'yasnippet nil t))
         (package-install 'yasnippet)
         (package-install 'go-snippets))
       (when (not (require 'color-theme nil t))
         (package-install 'color-theme)
         (package-install color-theme-sanityinc-tomorrow)
       (when (not (require 'flymake nil t))
         (package-install 'flymake))
       (when (not (require 'git-commit nil t))
         (package-install 'git-commit))
       (when (not (require 'popup nil t))
         (package-install 'popup))
       (when (not (require 'with-editor nil t))
         (package-install 'with-editor))
       (when (not (require 'magit nil t))
         (package-install 'magit))
       (when (not (require 'auctex nil t))
         (package-install 'auctex)
         (package-install latex-preview-pane))
       (when (not (require 'async nil t))
         (package-install 'async))
       )
  )
